(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{7695:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/orderSummary.js",function(){return r(200)}])},200:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var a=r(4848),o=r(6540),n=r(7037),c=r(3596);r(3246);var s=r(9850),i=r.n(s);function d(t){let{selectedProducts:e=[],setSelectedProducts:r,goBack:s}=t,[d,u]=(0,o.useState)(0);(0,o.useEffect)(()=>{if(!Array.isArray(e)||0===e.length){u(0);return}u(e.reduce((t,e)=>t+(e.proTotalPrice||0),0))},[e]);let l=t=>{Array.isArray(e)&&r(e.filter(e=>e.id!==t))},m=async()=>{let t=new c.default,r=JSON.parse(localStorage.getItem("userInfo")||"{}"),a=r.name||"Unknown",o=r.mobile||"N/A",n="Test Shop",s="+91 1234567890";t.setFontSize(16),t.text("Order Summary",80,10),t.setFontSize(12),t.text("Customer: ".concat(a),14,20),t.text("Contact: ".concat(o),14,30),t.text("Shop: ".concat(n),120,20),t.text("Shop Contact: ".concat(s),120,30);let i=0,d=0,u=e.length,l=e.map((t,e)=>{var r;let a=parseFloat(t.quantity)||0;(null===(r=t.quantity)||void 0===r?void 0:r.includes("g"))&&(a/=1e3);let o=a*(t.price||0);return i+=o,d+=a,[e+1,t.title||"N/A",t.quantity||"N/A","Rs ".concat(t.price||0),"Rs ".concat(o.toFixed(2))]});t.autoTable({head:[["#","Product","Quantity","Unit Price","Total Price"]],body:l,startY:40});let m=t.output("blob"),_=new FormData;_.append("file",m,"Order_Summary.pdf");let p=await fetch("/api/orders",{method:"POST",body:_});if(p.ok){let t=await p.json(),e="".concat(window.location.origin).concat(t.fileUrl),r=encodeURIComponent("\uD83D\uDED2 *Order Summary*\n\uD83D\uDC64 Name: ".concat(a,"\n\uD83D\uDCDE Contact: ").concat(o,"\n\uD83D\uDECD️ Shop: ").concat(n,"\n\uD83D\uDCF2 Shop Contact: ").concat(s,"\n\n\uD83D\uDCE6 *Total Products:* ").concat(u,"\n\uD83D\uDD22 *Total Quantity:* ").concat(d.toFixed(2)," kg\n\uD83D\uDCB0 *Total Amount:* Rs ").concat(i.toFixed(2),"\n\uD83D\uDCCE Download Invoice: ").concat(e));window.open("https://wa.me/+918602148689?text=".concat(r),"_blank")}else alert("Failed to store the PDF.")};return(0,a.jsxs)("div",{className:i().container,children:[(0,a.jsxs)("header",{className:i().header,children:[(0,a.jsx)("button",{onClick:s,className:i().backButton,children:"← Back"}),(0,a.jsx)("h1",{children:"Order Summary"})]}),(0,a.jsx)("div",{className:i().orderList,children:e.length>0?e.map(t=>(0,a.jsxs)("div",{className:i().orderItem,children:[(0,a.jsx)("img",{src:t.productImage,alt:t.title||"Product",className:i().productImage}),(0,a.jsx)("p",{className:i().productTitle,children:t.title||"N/A"}),(0,a.jsxs)("p",{className:i().quantity,children:["Qty: ",t.quantity||"N/A"]}),(0,a.jsxs)("p",{className:i().price,children:["Rs ",t.price||0]}),(0,a.jsxs)("p",{className:i().totalPrice,children:["Rs ",(t.proTotalPrice||0).toFixed(2)]}),(0,a.jsx)("button",{onClick:()=>l(t.id),className:i().removeButton,children:(0,a.jsx)(n.qbC,{})})]},t.id)):(0,a.jsx)("p",{children:"No products selected."})}),(0,a.jsxs)("footer",{className:i().footer,children:[(0,a.jsxs)("div",{className:i().summary,children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Products:"})," ",e.length]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Amount:"})," Rs ",d.toFixed(2)]})]}),(0,a.jsxs)("button",{onClick:m,className:i().whatsappButton,children:[(0,a.jsx)(n.EcP,{})," Place Order"]})]})]})}},9850:t=>{t.exports={container:"orderSummary_container__2Adoy",header:"orderSummary_header__uG_o4",backButton:"orderSummary_backButton__qQhvC",orderList:"orderSummary_orderList__JWa4d",orderItem:"orderSummary_orderItem__4g7Eh",productImage:"orderSummary_productImage__lejcR",productTitle:"orderSummary_productTitle__ojjBp",quantity:"orderSummary_quantity__i10QI",price:"orderSummary_price__FbZds",totalPrice:"orderSummary_totalPrice__PidqZ",removeButton:"orderSummary_removeButton__OQO_r",footer:"orderSummary_footer__myQJN",summary:"orderSummary_summary__DXPEU",whatsappButton:"orderSummary_whatsappButton___zsra"}}},t=>{var e=e=>t(t.s=e);t.O(0,[563,673,831,636,593,792],()=>e(7695)),_N_E=t.O()}]);