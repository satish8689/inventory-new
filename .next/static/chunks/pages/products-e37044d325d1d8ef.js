(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{939:(t,e,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return o(19)}])},200:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>i});var r=o(4848),a=o(6540),l=o(7037),s=o(3596);o(3246);var c=o(9850),n=o.n(c);function i(t){let{selectedProducts:e=[],setSelectedProducts:o,goBack:c}=t,[i,d]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(!Array.isArray(e)){d(0);return}d(e.reduce((t,e)=>t+(e.proTotalPrice||0),0))},[e]);let u=t=>{o(e.filter(e=>e.id!==t))},p=async()=>{let t=new s.default,o=JSON.parse(localStorage.getItem("userInfo"))||{},r=o.name||"Unknown User",a=o.mobile||"Unknown Contact",l="Test Shop",c="+91 1234567890";t.setFontSize(16),t.text("Order Summary",80,10),t.setFontSize(12),t.text("Customer: ".concat(r),14,20),t.text("Contact: ".concat(a),14,30),t.text("Shop: ".concat(l),120,20),t.text("Shop Contact: ".concat(c),120,30);let n=0,i=e.length,d=e.map((t,e)=>{let o=parseFloat(t.quantity)||0;t.quantity.includes("gm")&&(o/=1e3);let r=o*(t.price||0);return n+=r,[e+1,t.title,t.quantity,"Rs ".concat(t.price),"Rs ".concat(r.toFixed(2))]});t.autoTable({head:[["#","Product","Quantity","Unit Price","Total Price"]],body:[...d,[{content:" ",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff"}},{content:" ",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff"}},{content:" ",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff"}},{content:"Total Products",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff",textColor:"#1d2a35"}},{content:i,styles:{fontStyle:"bold",halign:"left",fillColor:"#fff",textColor:"#1d2a35"}}],[{content:" ",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff"}},{content:" ",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff"}},{content:" ",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff"}},{content:"Total Amount",styles:{fontStyle:"bold",halign:"left",fillColor:"#fff",textColor:"#1d2a35"}},{content:"Rs "+n.toFixed(2),styles:{fontStyle:"bold",halign:"left",fillColor:"#fff",textColor:"#1d2a35"}}]],startY:40});let u="".concat(new Date().toLocaleDateString().replace(/\//g,"-"),"-Order-Summary.pdf");t.save(u);let p=encodeURIComponent("*Order Summary*\n Name: ".concat(r,"\n Contact: ").concat(a,"\n Shop: ").concat(l,"\n Shop Contact: ").concat(c,"\n\n*Total Products:* ").concat(i,"\n *Total Amount:* Rs ").concat(n.toFixed(2),"\n*Note*: Please Attach order file"));window.open("https://wa.me/+918602148689?text=".concat(p),"_blank")};return(0,r.jsxs)("div",{className:n().container,children:[(0,r.jsxs)("header",{className:n().header,children:[(0,r.jsx)("button",{onClick:c,className:n().backButton,children:"← Back"}),(0,r.jsx)("h1",{children:"Order Summary"})]}),(0,r.jsx)("div",{className:n().orderList,children:e.length>0?e.map(t=>(0,r.jsxs)("div",{className:n().orderItem,children:[(0,r.jsx)("img",{src:t.productImage,alt:t.title,className:n().productImage}),(0,r.jsx)("p",{className:n().productTitle,children:t.title}),(0,r.jsxs)("p",{className:n().quantity,children:["Qty: ",t.quantity]}),(0,r.jsxs)("p",{className:n().price,children:["Rs ",t.price]}),(0,r.jsxs)("p",{className:n().totalPrice,children:["Rs ",(t.proTotalPrice||0).toFixed(2)]}),(0,r.jsx)("button",{onClick:()=>u(t.id),className:n().removeButton,children:(0,r.jsx)(l.qbC,{})})]},t.id)):(0,r.jsx)("p",{children:"No products selected."})}),(0,r.jsxs)("footer",{className:n().footer,children:[(0,r.jsxs)("div",{className:n().summary,children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Total Products:"})," ",e.length]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Total Amount:"})," Rs ",i.toFixed(2)]})]}),(0,r.jsxs)("button",{onClick:p,className:n().whatsappButton,children:[(0,r.jsx)(l.EcP,{})," Place Order"]})]})]})}},19:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>n});var r=o(4848),a=o(6540),l=o(4863),s=o.n(l),c=o(200);function n(){let[t,e]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(""),[d,u]=(0,a.useState)([]),[p,m]=(0,a.useState)(!1),[_,h]=(0,a.useState)(!0),[f,x]=(0,a.useState)(!1),[y,N]=(0,a.useState)(""),[S,j]=(0,a.useState)("");async function g(){let t=await fetch("/api/ic_product"),e=await t.json();if(e&&e.length>0)return u(e),e}async function v(){let t=await g(),o=await fetch("/api/products"),r=await o.json();r&&r.length>0&&e(r.map(e=>{let o=t.find(t=>t.id===e.product_id),r=null==o?void 0:o.title.split("||");return console.log("productTitleDesplay",r[0]),{productTitle:r[0]?r[0]:"",productImage:(null==o?void 0:o.image_url)||"",...e}})),h(!1)}(0,a.useEffect)(()=>{let t=localStorage.getItem("userInfo");if(t){let e=JSON.parse(t);N(e.name),j(e.mobile)}else x(!0);v()},[]);let C=(e,o)=>{let r=t.find(t=>t.id===e);if(!r)return;let a=parseFloat(o),s=(o.includes("kg")?a:a/1e3)*r.price;l(t=>{let e=t.map(t=>t.title===r.productTitle?{...t,quantity:o,proTotalPrice:s}:t);return o?t.some(t=>t.title===r.productTitle)||e.push({id:r.id,title:r.productTitle,productImage:r.productImage,price:r.price,type:r.type,quantity:o,proTotalPrice:s}):e=e.filter(t=>t.title!==r.productTitle),e})};if(p)return(0,r.jsx)(c.default,{selectedProducts:o,setSelectedProducts:l,goBack:()=>{m(!1)}});let b=t.filter(t=>!n||t.productTitle&&t.productTitle.toLowerCase().includes(n.toLowerCase()));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:s().header,children:[(0,r.jsx)("div",{className:s().shopName,children:"My Shop"}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:s().searchBoxCont,children:(0,r.jsx)("input",{type:"text",placeholder:"Search products...",value:n,onChange:t=>i(t.target.value),className:s().searchBox})})]}),(0,r.jsxs)("div",{className:s().container,children:[f&&(0,r.jsx)("div",{className:s().popup,children:(0,r.jsxs)("div",{className:s().popupContent,children:[(0,r.jsx)("h2",{children:"Enter Your Details"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Name",value:y,onChange:t=>N(t.target.value),className:s().input}),(0,r.jsx)("input",{type:"tel",placeholder:"Enter Mobile Number",value:S,onChange:t=>j(t.target.value),className:s().input}),(0,r.jsx)("button",{onClick:()=>{if(!y.trim()||!S.trim()){alert("Please enter valid Name and Mobile Number");return}if(!/^\d{10}$/.test(S)){alert("Please enter a valid 10-digit mobile number.");return}localStorage.setItem("userInfo",JSON.stringify({name:y,mobile:S})),x(!1)},className:s().submitButton,children:"Submit"})]})}),_?(0,r.jsx)("div",{className:s().loadercontainer,children:(0,r.jsx)("div",{className:s().loader})}):(0,r.jsx)("div",{className:s().productList,children:b.length>0?b.map(t=>{var e;let a=o.find(e=>e.title===t.productTitle);return(0,r.jsxs)("div",{className:s().productCard,children:[(0,r.jsx)("img",{src:t.productImage,alt:t.productTitle,className:s().productImage}),(0,r.jsxs)("div",{className:s().productDetails,children:[(0,r.jsxs)("div",{className:s().actions,children:[(0,r.jsx)("span",{className:s().productTitle,children:t.productTitle}),(0,r.jsxs)("select",{value:(null==a?void 0:a.quantity)||"",onChange:e=>C(t.id,e.target.value),className:s().quantitySelect,children:[(0,r.jsx)("option",{value:"",children:"Select Quantity"}),null===(e=t.availability)||void 0===e?void 0:e.map((t,e)=>(0,r.jsx)("option",{value:t,children:t},e))]})]}),(0,r.jsxs)("span",{className:s().productPrice,children:["Rs ",t.price," / 1",t.type]}),(0,r.jsx)("span",{className:s().productNote,children:t.note}),(0,r.jsx)("span",{className:s().productNote,children:t.description})]})]},t.id)}):(0,r.jsx)("p",{children:"No products available"})}),(0,r.jsx)("button",{onClick:()=>{m(!0)},className:s().orderButton,children:"Order Summary"})]})]})}},9850:t=>{t.exports={container:"orderSummary_container__2Adoy",header:"orderSummary_header__uG_o4",backButton:"orderSummary_backButton__qQhvC",orderList:"orderSummary_orderList__JWa4d",orderItem:"orderSummary_orderItem__4g7Eh",productImage:"orderSummary_productImage__lejcR",productTitle:"orderSummary_productTitle__ojjBp",quantity:"orderSummary_quantity__i10QI",price:"orderSummary_price__FbZds",totalPrice:"orderSummary_totalPrice__PidqZ",removeButton:"orderSummary_removeButton__OQO_r",footer:"orderSummary_footer__myQJN",summary:"orderSummary_summary__DXPEU",whatsappButton:"orderSummary_whatsappButton___zsra"}},4863:t=>{t.exports={container:"products_container__Nk86u",__next:"products___next__OazHf",header:"products_header__ywfTt",shopName:"products_shopName__8ya2T",searchBoxCont:"products_searchBoxCont__bvNKv",searchBox:"products_searchBox__HSflH",productList:"products_productList__CGdhV",productCard:"products_productCard__p5i2p",productImage:"products_productImage___BNjx",productDetails:"products_productDetails__J84Mt",productTitle:"products_productTitle__YXzfX",productPrice:"products_productPrice__gN0WR",productNote:"products_productNote__Q4NgS",quantitySelect:"products_quantitySelect__jnRM_",actionIcons:"products_actionIcons__lGBCz",iconButton:"products_iconButton__63y67",orderButton:"products_orderButton__COebp",popup:"products_popup__5Qzh4",popupContent:"products_popupContent__dApcB",input:"products_input__LsfwR",submitButton:"products_submitButton__nziv_",loadercontainer:"products_loadercontainer__Lfa4c",loader:"products_loader__VkSx4",spin:"products_spin__y576n"}}},t=>{var e=e=>t(t.s=e);t.O(0,[563,673,831,636,593,792],()=>e(939)),_N_E=t.O()}]);