(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{3951:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/shopproduct",function(){return i(2266)}])},2266:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var r=i(4848),o=i(1405),n=i.n(o),l=i(6540),s=i(7037);function a(){let[e,t]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[a,c]=(0,l.useState)([]),[d,p]=(0,l.useState)({shop_id:0,product_id:0,price:0,note:"",description:"",position:0,availability:[]}),[u,h]=(0,l.useState)(""),[m,j]=(0,l.useState)(null);async function v(){let e=await fetch("/api/shop"),i=await e.json();i&&i.length>0&&t(i)}async function f(){let e=await fetch("/api/ic_product"),t=await e.json();t&&t.length>0&&c(t)}async function b(){let e=await fetch("/api/shop_products"),t=await e.json();t&&t.length>0&&o(t)}(0,l.useEffect)(()=>{v(),f(),b()},[]),(0,l.useEffect)(()=>{p(e=>({...e,position:(null==i?void 0:i.length)||0}))},[i]);let x=e=>{let t="number"===e.target.type?Number(e.target.value):e.target.value;p({...d,[e.target.name]:t})},_=async e=>{e.preventDefault();let t=m?"PUT":"POST",i=m?{...d,id:m}:d;i.product_id=Number(i.product_id),i.price=Number(i.price),i.shop_id=Number(i.shop_id),i.position=Number(i.position);let r=await fetch("/api/shop_products",{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});r.ok?(b(),p({shop_id:0,product_id:0,price:"",note:"",description:"",position:0,availability:[]}),j(null)):400===r.status&&h("Product already exists")},y=e=>{p(e),j(e.id)},g=async e=>{(await fetch("/api/shop_products",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&b()};return(0,r.jsxs)("div",{className:n().container,children:[(0,r.jsx)("h1",{className:n().title,children:"Manage Shop Products"}),(0,r.jsx)("p",{className:n().error,children:u}),(0,r.jsxs)("form",{onSubmit:_,className:n().form,children:[(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"shop_id",children:"Shop"}),(0,r.jsxs)("select",{id:"shop_id",name:"shop_id",value:d.shop_id,onChange:x,children:[(0,r.jsx)("option",{value:0,children:"Select Shop"}),e.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"product_id",children:"Product"}),(0,r.jsxs)("select",{id:"product_id",name:"product_id",value:d.product_id,onChange:x,children:[(0,r.jsx)("option",{value:0,children:"Select Product"}),a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,r.jsxs)("div",{className:n().formGroup,children:["pe",(0,r.jsx)("label",{htmlFor:"type",children:"Type"}),(0,r.jsxs)("select",{id:"type",name:"type",value:d.type,onChange:x,children:[(0,r.jsx)("option",{value:0,children:"Select Type"}),(0,r.jsx)("option",{value:"kg",children:"KG"}),(0,r.jsx)("option",{value:"litter",children:"Litter"})]})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"price",children:"Price"}),(0,r.jsx)("input",{type:"text",id:"price",name:"price",placeholder:"Price",value:d.price,onChange:x})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"note",children:"Note"}),(0,r.jsx)("input",{id:"note",name:"note",placeholder:"Note",value:d.note,onChange:x})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"description",children:"Description"}),(0,r.jsx)("input",{id:"description",name:"description",placeholder:"Description",value:d.description,onChange:x})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"availability",children:"Available In"}),(0,r.jsx)("select",{id:"availability",name:"availability",multiple:!0,value:d.availability,onChange:e=>{let t=Array.from(e.target.selectedOptions,e=>e.value);p({...d,availability:t})},children:["100g","200g","500g","1kg","2kg","5kg","10kg","15kg","20kg","30kg","40kg","50kg"].map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"position",children:"Position"}),(0,r.jsx)("input",{type:"text",id:"position",name:"position",placeholder:"Position",value:d.position,onChange:x})]}),(0,r.jsx)("div",{className:n().formGroup,children:(0,r.jsx)("button",{type:"submit",className:n().addproduct,children:m?"Update":"Add"})})]}),(0,r.jsxs)("table",{className:n().table,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Shop"}),(0,r.jsx)("th",{children:"Image"}),(0,r.jsx)("th",{children:"Product"}),(0,r.jsx)("th",{children:"Price"}),(0,r.jsx)("th",{children:"Note"}),(0,r.jsx)("th",{children:"Description"}),(0,r.jsx)("th",{children:"Availability"}),(0,r.jsx)("th",{children:"Position"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:i.length>0&&i.map(t=>{var i,o,l,c,d;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.id}),(0,r.jsx)("td",{children:(null===(i=e.find(e=>e.id===t.shop_id))||void 0===i?void 0:i.name)||"N/A"}),(0,r.jsx)("td",{children:(null===(o=a.find(e=>e.id===t.product_id))||void 0===o?void 0:o.image_url)&&(0,r.jsx)("img",{src:null===(l=a.find(e=>e.id===t.product_id))||void 0===l?void 0:l.image_url,alt:null===(c=a.find(e=>e.id===t.product_id))||void 0===c?void 0:c.title,className:n().previewImage})}),(0,r.jsx)("td",{children:(null===(d=a.find(e=>e.id===t.product_id))||void 0===d?void 0:d.title)||"N/A"}),(0,r.jsxs)("td",{children:[t.price," ",t.type]}),(0,r.jsx)("td",{children:t.note}),(0,r.jsx)("td",{children:t.description}),(0,r.jsx)("td",{children:t.availability?t.availability.join(", "):""}),(0,r.jsx)("td",{children:t.position}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{onClick:()=>y(t),className:n().editbtn,children:(0,r.jsx)(s.uO9,{})}),(0,r.jsx)("button",{onClick:()=>g(t.id),className:n().deletebtn,children:(0,r.jsx)(s.qbC,{})})]})]},t.id)})})]})]})}},1405:e=>{e.exports={container:"shopproduct_container__cXlz8",title:"shopproduct_title__oIbyN",error:"shopproduct_error__FmhkK",previewImage:"shopproduct_previewImage__Uiw_C",form:"shopproduct_form__QAvRw","form-group":"shopproduct_form-group__2ftt8",addproduct:"shopproduct_addproduct__eEJeA",table:"shopproduct_table__6eu7_",productImage:"shopproduct_productImage__Ru4SB",editbtn:"shopproduct_editbtn__F8_AQ",deletebtn:"shopproduct_deletebtn__JVRBF"}},5787:(e,t,i)=>{"use strict";i.d(t,{k5:()=>d});var r=i(6540),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=r.createContext&&r.createContext(o),l=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach(function(t){var r,o;r=t,o=i[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function d(e){return t=>r.createElement(p,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,i)=>r.createElement(t.tag,c({key:i},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var i,{attr:o,size:n,title:a}=e,d=function(e,t){if(null==e)return{};var i,r,o=function(e,t){if(null==e)return{};var i={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)i=n[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}(e,l),p=n||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),r.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,d,{className:i,style:c(c({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),e.children)};return void 0!==n?r.createElement(n.Consumer,null,e=>t(e)):t(o)}}},e=>{var t=t=>e(e.s=t);e.O(0,[563,636,593,792],()=>t(3951)),_N_E=e.O()}]);